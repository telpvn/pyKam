# Структура функции в Python

## Общий синтаксис

```python
def имя_функции([список_аргументов]):
    """Документация функции (необязательно)"""
    оператор (действие) 1
    оператор (действие) 2
    .......
    оператор (действие) N
    return результат  # необязательно
```

## Анатомия функции

### 1. Ключевое слово `def`

```python
def  # Начинает определение функции
```

### 2. Имя функции

```python
def моя_функция():  # Имя должно быть понятным и описательным
    pass

def рассчитать_налог():  # Хорошее имя - описывает назначение
    pass

def процесс():  # Плохое имя - неясно что делает
    pass
```

### 3. Список аргументов в круглых скобках

```python
def без_аргументов():
    """Функция без параметров"""
    return "Привет!"

def один_аргумент(имя):
    """Функция с одним параметром"""
    return f"Привет, {имя}!"

def несколько_аргументов(имя, возраст, город):
    """Функция с несколькими параметрами"""
    return f"{имя}, {возраст} лет, из {город}"

def с_параметрами_по_умолчанию(имя, возраст=18, активен=True):
    """Функция с параметрами по умолчанию"""
    статус = "активен" if активен else "неактивен"
    return f"{имя}, {возраст} лет, {статус}"
```

### 4. Двоеточие `:` 

Обязательный символ, завершающий заголовок функции.

```python
def моя_функция():  # Двоеточие обязательно!
    return "Работает"

# ❌ Ошибка - забыли двоеточие
# def плохая_функция()
#     return "Не работает"
```

### 5. Тело функции (блок операторов)

```python
def комплексная_функция(данные, опции=None):
    """Пример функции с несколькими операторами"""
    
    # Оператор 1: Проверка входных данных
    if not данные:
        return None
    
    # Оператор 2: Инициализация переменных
    результат = []
    счетчик = 0
    
    # Оператор 3: Основная логика
    for элемент in данные:
        if элемент is not None:
            результат.append(элемент * 2)
            счетчик += 1
    
    # Оператор 4: Дополнительная обработка
    if опции and опции.get('сортировка'):
        результат.sort()
    
    # Оператор 5: Логирование
    print(f"Обработано {счетчик} элементов")
    
    # Оператор 6: Возврат результата
    return результат
```

## Примеры различных структур функций

### Простая функция

```python
def приветствие():
    """Простейшая функция без параметров"""
    print("Привет, мир!")
    
# Вызов
приветствие()
```

### Функция с одним оператором

```python
def квадрат(x):
    return x ** 2

# Использование
результат = квадрат(5)  # 25
```

### Функция с множественными операторами

```python
def обработать_список(числа):
    """Функция с несколькими операторами"""
    # Оператор 1: Валидация
    if not числа:
        return None
    
    # Оператор 2: Фильтрация
    положительные = [x for x in числа if x > 0]
    
    # Оператор 3: Вычисления
    сумма = sum(положительные)
    среднее = сумма / len(положительные) if положительные else 0
    
    # Оператор 4: Подготовка результата
    результат = {
        'сумма': сумма,
        'среднее': среднее,
        'количество': len(положительные)
    }
    
    # Оператор 5: Возврат
    return результат

# Использование
данные = [1, -2, 3, -4, 5]
итог = обработать_список(данные)
print(итог)  # {'сумма': 9, 'среднее': 3.0, 'количество': 3}
```

### Функция с условной логикой

```python
def определить_категорию_возраста(возраст):
    """Функция с условными операторами"""
    # Оператор 1: Проверка корректности
    if возраст < 0:
        return "Некорректный возраст"
    
    # Оператор 2: Определение категории
    if возраст < 13:
        категория = "ребенок"
    elif возраст < 20:
        категория = "подросток"
    elif возраст < 60:
        категория = "взрослый"
    else:
        категория = "пожилой"
    
    # Оператор 3: Формирование ответа
    return f"Возраст {возраст} лет - {категория}"

# Тестирование
print(определить_категория_возраста(10))  # ребенок
print(определить_категория_возраста(25))  # взрослый
```

### Функция с циклами

```python
def найти_простые_числа(максимум):
    """Функция с циклом для поиска простых чисел"""
    # Оператор 1: Инициализация
    простые = []
    
    # Оператор 2: Основной цикл
    for число in range(2, максимум + 1):
        является_простым = True
        
        # Оператор 3: Вложенный цикл проверки
        for делитель in range(2, int(число ** 0.5) + 1):
            if число % делитель == 0:
                является_простым = False
                break
        
        # Оператор 4: Добавление если простое
        if является_простым:
            простые.append(число)
    
    # Оператор 5: Возврат результата
    return простые

# Использование
простые_до_20 = найти_простые_числа(20)
print(простые_до_20)  # [2, 3, 5, 7, 11, 13, 17, 19]
```

## Различные способы завершения функции

### 1. Без явного return

```python
def просто_печать(сообщение):
    """Функция без явного return возвращает None"""
    print(f"Сообщение: {сообщение}")
    # Неявно возвращает None

результат = просто_печать("Тест")
print(результат)  # None
```

### 2. С явным return None

```python
def проверить_четность(число):
    """Функция с явным return None при определенных условиях"""
    if not isinstance(число, int):
        return None  # Явно возвращаем None
    
    return число % 2 == 0
```

### 3. С множественными return

```python
def классифицировать_число(число):
    """Функция с несколькими точками выхода"""
    # Ранний выход при ошибке
    if not isinstance(число, (int, float)):
        return "Ошибка: не число"
    
    # Различные варианты возврата
    if число == 0:
        return "ноль"
    elif число > 0:
        return "положительное"
    else:
        return "отрицательное"
```

### 4. Возврат нескольких значений

```python
def статистика_списка(числа):
    """Функция возвращающая несколько значений"""
    if not числа:
        return 0, 0, 0  # Возвращаем кортеж
    
    минимум = min(числа)
    максимум = max(числа)
    среднее = sum(числа) / len(числа)
    
    return минимум, максимум, среднее

# Использование
данные = [1, 5, 3, 9, 2]
мин, макс, сред = статистика_списка(данные)
print(f"Мин: {мин}, Макс: {макс}, Среднее: {сред}")
```

## Полный пример сложной функции

```python
def анализировать_текст(текст, включить_статистику=True, язык='ru'):
    """
    Комплексная функция анализа текста.
    
    Args:
        текст (str): Текст для анализа
        включить_статистику (bool): Включить детальную статистику
        язык (str): Язык текста для анализа
    
    Returns:
        dict: Результаты анализа текста
    """
    # Оператор 1: Валидация входных данных
    if not isinstance(текст, str) or not текст.strip():
        return {"ошибка": "Пустой или некорректный текст"}
    
    # Оператор 2: Базовая очистка
    очищенный_текст = текст.strip().lower()
    
    # Оператор 3: Подсчет основных метрик
    количество_символов = len(текст)
    количество_слов = len(текст.split())
    количество_строк = len(текст.split('\n'))
    
    # Оператор 4: Подготовка базового результата
    результат = {
        'символов': количество_символов,
        'слов': количество_слов,
        'строк': количество_строк
    }
    
    # Оператор 5: Дополнительная статистика (условно)
    if включить_статистику:
        слова = очищенный_текст.split()
        уникальные_слова = set(слова)
        
        результат.update({
            'уникальных_слов': len(уникальные_слова),
            'средняя_длина_слова': sum(len(слово) for слово in слова) / len(слова) if слова else 0,
            'самое_длинное_слово': max(слова, key=len) if слова else "",
            'язык': язык
        })
    
    # Оператор 6: Возврат результата
    return результат

# Пример использования
текст_для_анализа = """
Это пример текста для анализа.
Он содержит несколько строк и различные слова.
Функция должна проанализировать его структуру.
"""

анализ = анализировать_текст(текст_для_анализа, включить_статистику=True)
for ключ, значение in анализ.items():
    print(f"{ключ}: {значение}")
```

## Ключевые принципы структуры функции

1. **Четкое начало**: `def имя_функции(параметры):`
2. **Отступы**: Все операторы в теле функции должны иметь одинаковый отступ
3. **Логическая последовательность**: Операторы должны следовать в логическом порядке
4. **Один выход**: Лучше иметь один return в конце (когда возможно)
5. **Документация**: Добавляйте docstring для сложных функций
6. **Читаемость**: Код должен быть понятен без комментариев

```python
def хорошая_структура(параметр1, параметр2=None):
    """Хорошо структурированная функция."""
    # 1. Валидация
    if параметр1 is None:
        return None
    
    # 2. Инициализация
    результат = []
    
    # 3. Основная логика
    for элемент in параметр1:
        if элемент:
            результат.append(элемент)
    
    # 4. Финальная обработка
    if параметр2:
        результат = sorted(результат)
    
    # 5. Возврат
    return результат
```